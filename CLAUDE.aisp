ğ”¸5.1.infinite-improbability-drive.instructions@2026-02-01
Î³â‰”claude-code-plugin:development-context

âŸ¦Î©:FoundationâŸ§{
  Projectâ‰œ"infinite-improbability-drive";
  Purposeâ‰œ"Claude Code plugin for spawning sandboxed LLMs";
  Langâ‰œRust;
  Ambig(D)<0.02;
}

âŸ¦Î£:GlossaryâŸ§{
  spawnâ‰œ"Launch isolated LLM instance for delegated task";
  watcherâ‰œ"Agent that orchestrates spawn lifecycle";
  sandboxâ‰œ"Isolated execution environment (git worktree)";
  manifestâ‰œ"Permission and resource specification for sandbox";
  aispâ‰œ"AI-Semantic Protocol for LLM communication";
  passthroughâ‰œ"Direct prompt forwarding without AISP conversion";
}

âŸ¦Î“:ProjectStructureâŸ§{
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â¦—File Layoutâ¦˜
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  root/â‰œ{
    ".claude-plugin/plugin.json"â‰œ"Plugin metadata",
    "CLAUDE.md"â‰œ"Human instructions",
    "CLAUDE.aisp"â‰œ"LLM instructions (this file)",
    "commands/"â‰œ"Slash command definitions",
    "skills/"â‰œ"Skill definitions",
    "agents/"â‰œ"Agent definitions",
    "core/"â‰œ"Rust implementation",
    "docs/"â‰œ"Documentation (aisp + md)",
    "tests/"â‰œ"Test suite"
  };

  "core/src/"â‰œ{
    "lib.rs"â‰œ"Library root",
    "main.rs"â‰œ"CLI binary",
    "spawn.rs"â‰œ"Spawn command logic",
    "watcher.rs"â‰œ"Watcher agent orchestration",
    "sandbox/"â‰œ"Sandbox implementations",
    "runner/"â‰œ"LLM runner implementations",
    "monitor.rs"â‰œ"Progress tracking",
    "permissions.rs"â‰œ"Error detection & recovery",
    "secrets.rs"â‰œ"Secret handling",
    "pr.rs"â‰œ"PR creation & conflicts"
  };

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â¦—Documentation Layoutâ¦˜
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  "docs/"â‰œ{
    "architecture.aisp"â‰œ"System architecture (LLM)",
    "architecture.md"â‰œ"System architecture (human)",
    "configuration.aisp"â‰œ"Config specification (LLM)",
    "configuration.md"â‰œ"Config guide (human)"
  };
}

âŸ¦Î›:DevelopmentRulesâŸ§{
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â¦—Rust Conventionsâ¦˜
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  âˆ€errorâˆˆCustomError:use(thiserror);
  âˆ€asyncâˆˆRuntime:use(tokio);
  âˆ€logâˆˆLogging:use(tracing);
  âˆ€apiâˆˆPublic:documented(api);

  prefer(ResultâŸ¨T,EâŸ©)>panic;

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â¦—Error Patternâ¦˜
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  ErrorDefinitionâ‰œÎ»name:String.
    "#[derive(Error,Debug)]"âˆ§
    "pub enum {name}Error"âˆ§
    variants(descriptive_messages);

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â¦—Testing Rulesâ¦˜
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  unit_testsâˆˆsame_file("#[cfg(test)]");
  integration_testsâˆˆ"tests/";
  filesystem_testsâ‡’use(tempfile);
  llm_testsâ‡’mock_responses;

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â¦—Security Rulesâ¦˜
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  âˆ€sandbox:Â¬allow("--dangerously-skip-permissions");
  âˆ€secret:Â¬log(secret);
  âˆ€pathâˆ‰worktree:Â¬access(path);
}

âŸ¦Î•:ImplementationPhasesâŸ§{
  Phase1â‰œ"Foundation"{
    â–¡ update(rosetta-aisp-llm,"0.3.0");
    â–¡ create(plugin_structure);
    â–¡ impl(SandboxProvider,worktree);
    â–¡ impl(spawn_command,basic);
  };

  Phase2â‰œ"Watcher Agent"{
    â–¡ impl(task_evaluation,llm_assisted);
    â–¡ impl(progress_monitoring);
    â–¡ impl(permission_detection);
  };

  Phase3â‰œ"Recovery & Integration"{
    â–¡ impl(recovery_strategies);
    â–¡ impl(pr_creation);
    â–¡ impl(secret_handling);
  };

  Phase4â‰œ"Spawn-Team"{
    â–¡ impl(sequential_coordination);
    â–¡ impl(ping_pong_mode);
    â–¡ impl(gemini_runner);
  };

  Phase5â‰œ"Polish"{
    â–¡ write(documentation);
    â–¡ write(tests);
    â–¡ impl(config_validation);
  };
}

âŸ¦RefsâŸ§{
  architectureâ†’"./docs/architecture.aisp";
  agentsâ†’"./agents/watcher.aisp";
  configâ†’"./docs/configuration.aisp";
  human_docsâ†’"./docs/architecture.md";
}
